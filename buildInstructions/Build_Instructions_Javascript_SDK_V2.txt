


##### Build Instructions for SDK v2 #####


In these instruction we will build the overledger-sdk-javascript-version2 project. 

The githib link for the project is: 

	https://github.com/quantnetwork/overledger-sdk-javascript-version2


The result of this build job in jenkins should be a zip file that will eventually be provided
to the client as a downloadable artifact on the overledger-ui




### PRE-REQUISITIES FOR JENKINS TO RUN SUCCESSFULLY ###


1) First install NPM

	> sudo apt update
	> sudo apt install nodejs
	> sudo apt install npm


2) Now install some required packages for NPM:

	> npm install --global yarn
	> npm install --global lerna


3) Install NVM


	Original instructions: https://github.com/nvm-sh/nvm#installing-and-updating

	
	The following instructions are an example on my local dev environment, First - I ran the curl command, next I added the required line to my bash profile as it says in the above link:

		> curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.38.0/install.sh | bash

	
	ADD THIS LINE TO THE BASH PROFILE:

		export NVM_DIR="$([ -z "${XDG_CONFIG_HOME-}" ] && printf %s "${HOME}/.nvm" || printf %s "${XDG_CONFIG_HOME}/nvm")"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh" # This loads nvm	



4) Install 10.22.0 for nvm

		> nvm install 10.22.0



5) Install zip/unzip tools if not already installed

	> sudo apt install zip unzip





##### JENKINS BUILD JOB SPECIFICATION ######



1) Build the project


	Execute at root of the SDK V2 project: 

	> yarn run build



2) After the above yarn command runs successfully - we now need to zip up the contents of the entire directory as a zip


	The zip should be created with a name-version.zip - at the moment I think the clearest approach is a name like this:

		overledger-sdk-javascript-version2-1.0.0.zip


	At the moment, I created a file to store the version number, so that developers can easily update the version accordingly.
	The file is called 'build.properties' and lives at the root of the repository. 

	To extract the version number to append to the output zip file name above you can use this command:


		> grep "${1}" build.properties|cut -d'=' -f2


	This will grab the version number for you, you would need to store that in a variable and then append it to the file name like this:

		versionNumber="`grep "${1}" build.properties|cut -d'=' -f2`"
		outputZipName="overledger-sdk-javascript-v2-${versionNumber}.zip"



	Therfore the zip command would be like this:

		> zip -r $outputZipName ./overledger-sdk-javascript-version2 -x "*.git*" -x "*buildInstructions*" -x "package-lock.json" -x "yarn.lock"
























